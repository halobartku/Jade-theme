{%- assign enabled 		= section.settings.is_cookie_bar_enabled -%}
{%- assign cookie_time 	= section.settings.cookie_bar_cookie_time | default: "Cookies" -%}
{%- assign heading 		= section.settings.cookie_bar_heading -%}
{%- assign text 		= section.settings.cookie_bar_text -%}
{%- assign button_label = section.settings.cookie_bar_button_label | default: "Accept all cookies" -%}
{%- assign show_shadow	= section.settings.cookie_bar_show_shadow -%}

{%- assign background_color 				= section.settings.cookie_bar_background_color | default: "#161E13" -%}
{%- assign text_color 						= section.settings.cookie_bar_text_color | default: "#ffffff" -%}
{%- assign button_close_color 				= section.settings.cookie_bar_button_close_color | default: "#ffffff" -%}
{%- assign button_background_color 			= section.settings.cookie_bar_button_background_color | default: "#161E13" -%}
{%- assign button_label_color 				= section.settings.cookie_bar_button_label_color | default: "#ffffff" -%}
{%- assign button_border_color 				= section.settings.cookie_bar_button_border_color | default: "#ffffff" -%}
{%- assign button_background_hover_color 	= section.settings.cookie_bar_button_background_hover_color | default: "#ffffff" -%}
{%- assign button_label_hover_color 		= section.settings.cookie_bar_button_label_hover_color | default: "#161E13" -%}
{%- assign button_border_hover_color 		= section.settings.cookie_bar_button_border_hover_color | default: "#161E13" -%}

{%- capture styles -%}
	--background-color: {{- background_color -}}; {{-  -}}
	--text-color: {{- text_color -}}; {{-  -}}
	--button-close-color: {{ button_close_color }}; {{-  -}}
	--button-background-color: {{- button_background_color -}}; {{-  -}}
	--button-label-color: {{- button_label_color -}}; {{-  -}}
	--button-border-color: {{- button_border_color -}}; {{-  -}}
	--button-background-hover-color: {{- button_background_hover_color -}}; {{-  -}}
	--button-label-hover-color: {{- button_label_hover_color -}}; {{-  -}}
	--button-border-hover-color: {{- button_border_hover_color -}};
{%- endcapture -%}

{%- if enabled -%}
	<div
		class="cookie-bar {% if show_shadow %} cookie-bar--shadow{% endif %} js-cookie-bar is-hidden"
		style="{{- styles -}}"
		data-cookie-time="{{- cookie_time -}}"
	>
		{%- render 'adastra' with '/src/styles/cookie-bar.scss' -%}

		<div class="cookie-bar__content">
			<div class="cookie-bar__header">
				{%- if heading != blank -%}
					<div class="cookie-bar__heading">
						{{- heading -}}
					</div>
				{%- endif -%}

				<button
					class="cookie-bar__close focus-visible-outline js-cookie-bar-accept"
					aria-label="{{ "general.accessibility.close" | t }}"
				>
					{%- render 'icons', icon: 'menu-close' -%}
				</button>
			</div>

			{%- if text != blank -%}
				<p class="cookie-bar__text">
					{{- text -}}
				</p>
			{%- endif -%}

			<button class="cookie-bar__button focus-visible-outline js-cookie-bar-accept">
				{{- button_label -}}
			</button>
		</div>

		{%- render 'adastra' with '/src/scripts/section-cookie-bar.js' -%}
	</div>
{%- endif -%}


{% schema %}
{
	"name": "Cookie bar",
	"limit": 1,
	"enabled_on": {
		"groups": ["custom.popup"]
	},
	"settings": [
		{
			"type": "checkbox",
			"id": "is_cookie_bar_enabled",
			"label": "Enable",
			"default": false
		},
		{
			"type": "select",
			"id": "cookie_bar_cookie_time",
			"label": "Cookie time",
			"options": [
				{
					"value": "1",
					"label": "1 day"
				},
				{
					"value": "7",
					"label": "1 week"
				},
				{
					"value": "30",
					"label": "1 month"
				},
				{
					"value": "90",
					"label": "3 months"
				},
				{
					"value": "360",
					"label": "1 year"
				}
			],
			"default": "1"
		},
		{
			"type": "text",
			"id": "cookie_bar_heading",
			"label": "Heading",
			"default": "Cookies"
		},
		{
			"type": "textarea",
			"id": "cookie_bar_text",
			"label": "Text",
			"default": "This website uses cookies to ensure you get the best experience on your device."
		},
		{
			"type": "text",
			"id": "cookie_bar_button_label",
			"label": "Button label",
			"default": "Accept all cookies"
		},
		{
			"type": "checkbox",
			"id": "cookie_bar_show_shadow",
			"label": "Show shadow",
			"default": false
		},
		{
			"type": "header",
			"content": "Colors"
		},
		{
			"type": "color",
			"id": "cookie_bar_background_color",
			"label": "Background",
			"default": "#161E13"
		},
		{
			"type": "color",
			"id": "cookie_bar_text_color",
			"label": "Text",
			"default": "#ffffff"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_close_color",
			"label": "Button close",
			"default": "#ffffff"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_background_color",
			"label": "Button background",
			"default": "#161E13"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_border_color",
			"label": "Button border",
			"default": "#ffffff"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_label_color",
			"label": "Button label",
			"default": "#ffffff"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_background_hover_color",
			"label": "Button background (hover)",
			"default": "#ffffff"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_border_hover_color",
			"label": "Button border (hover)",
			"default": "#161E13"
		},
		{
			"type": "color",
			"id": "cookie_bar_button_label_hover_color",
			"label": "Button label (hover)",
			"default": "#161E13"
		}
	],
	"presets": [
		{
			"name": "Cookie bar"
		}
	]
}
{% endschema %}
